{% extends "main/base.html" %}

{% block main %}
    <style>
        /* Success Page Specific Styles */
        .success-container {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
            padding: var(--space-xxl) 0;
        }
        
        .success-icon {
            width: 120px;
            height: 120px;
            background: var(--success);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--space-xl);
            color: white;
            font-size: 3rem;
            animation: pulse 2s ease-in-out;
        }
        
        .success-title {
            font-size: 2.5rem;
            margin-bottom: var(--space-md);
            color: var(--success);
        }
        
        .success-subtitle {
            font-size: 1.2rem;
            color: var(--primary-light);
            margin-bottom: var(--space-xl);
            line-height: 1.6;
        }
        
        .order-details {
            background: var(--light-gray);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            margin: var(--space-xl) 0;
            text-align: left;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: var(--space-md) 0;
            border-bottom: 1px solid var(--medium-gray);
        }
        
        .detail-row:last-child {
            border-bottom: none;
        }
        
        .detail-label {
            color: var(--primary-light);
            font-weight: 500;
        }
        
        .detail-value {
            font-weight: 600;
            color: var(--primary-dark);
        }
        
        .confirmation-box {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-bottom: var(--space-xl);
            box-shadow: var(--glass-shadow);
        }
        
        .confirmation-title {
            font-size: 1rem;
            color: var(--primary-light);
            margin-bottom: var(--space-sm);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .confirmation-code {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent);
            font-family: monospace;
            letter-spacing: 2px;
        }
        
        .action-buttons {
            display: flex;
            gap: var(--space-md);
            justify-content: center;
            margin-top: var(--space-xl);
            flex-wrap: wrap;
        }
        
        .email-notice {
            background: rgba(0, 184, 148, 0.1);
            border: 1px solid rgba(0, 184, 148, 0.2);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-top: var(--space-xl);
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }
        
        .email-icon {
            color: var(--success);
            font-size: 1.5rem;
        }
        
        @media (max-width: 768px) {
            .success-container {
                padding: var(--space-xl) var(--space-md);
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .action-buttons .btn {
                width: 100%;
            }
        }
    </style>

    <!-- Main Content -->
    <main class="section">
        <div class="container">
            <div class="success-container">
                <!-- Success Icon -->
                <div class="success-icon">
                    <i class="fas fa-check"></i>
                </div>
                
                <!-- Success Message -->
                <h1 class="success-title">Payment Successful!</h1>
                <p class="success-subtitle">
                    Thank you for your purchase! Your order has been confirmed and will be processed shortly.
                </p>
                
                <!-- Order Confirmation -->
                <div class="confirmation-box">
                    <div class="confirmation-title">Order Confirmation</div>
                    <div class="confirmation-code"></div>
                    <p style="margin-top: var(--space-sm); font-size: 0.9rem; color: var(--primary-light);">
                        An email confirmation has been sent to <strong>{{request.user.email}}</strong>
                    </p>
                </div>
                
                <!-- Order Details -->
                <div class="order-details">
                    <div class="detail-row">
                        <span class="detail-label">Order Number</span>
                        <span class="detail-value"> {{order.order_num}} </span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Order Date</span>
                        <span class="detail-value"> {{order.paid_at}} </span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Invoice no</span>
                        <span class="detail-value"> {{order.invoice}} </span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Payment Method</span>
                        <span class="detail-value"> {{order.get_payment_method_display}} </span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Payment ID</span>
                        <span class="detail-value"> {{order.payment_id}} </span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Total Amount</span>
                        <span class="detail-value" style="color: var(--success);">${{order.total_amount}} </span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Shipping Address</span>
                        <span class="detail-value">
                            {{order.address.address}} <br>
                            {{order.address.state}}
                        </span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Estimated Delivery</span>
                        <span class="detail-value"> {{ order.shipping_price.get_shipping_type_display }} </span>
                    </div>
                </div>
                
                <!-- Email Notice -->
                <div class="email-notice">
                    <div class="email-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div>
                        <h4 style="margin-bottom: var(--space-xs);">Check Your Email</h4>
                        <p style="color: var(--primary-light); font-size: 0.95rem;">
                            We've sent order confirmation and shipping updates to <strong> {{request.user.email}} </strong>
                        </p>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="action-buttons">
                    <a href="{% url "home" %}" class="btn btn-primary">
                        <i class="fas fa-home"></i> Back to Home
                    </a>
                    <a href="{% url "products" %}" class="btn btn-secondary">
                        <i class="fas fa-shopping-bag"></i> Continue Shopping
                    </a>
                    <a href="{% url "order_detail" order.id %}" class="btn btn-outline">
                        <i class="fas fa-clipboard-list"></i> View Order Details
                    </a>
                </div>
                
                <!-- Support Info -->
                {% comment %} <div style="margin-top: var(--space-xl); padding-top: var(--space-lg); border-top: 1px solid var(--medium-gray);">
                    <p style="color: var(--primary-light); font-size: 0.9rem;">
                        <i class="fas fa-headset" style="margin-right: var(--space-sm); color: var(--accent);"></i>
                        Need help? Contact our <a href="/support/" style="color: var(--accent);">customer support</a> 
                        or call us at <strong>1-800-123-4567</strong>
                    </p>
                </div> {% endcomment %}
            </div>
        </div>
    </main>
{% endblock main %}